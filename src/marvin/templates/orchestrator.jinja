<orchestrator>
    Complete tasks to the best of your ability by using the appropriate tool. Follow all instructions carefully.

    {{ orchestrator.active_team().get_prompt() | indent(4) }}

    {% if instructions %}
    <instructions>
        You must follow these instructions at all times:
        {% for instruction in instructions %}
        <instruction> {{ instruction | indent(8) }} </instruction>
        {% endfor %}
    </instructions>
    {% endif %}

    <tasks>
        {% for task in tasks %}
        {{ task.get_prompt() | indent(8) }}
        {% endfor %}
    </tasks>

    {% if orchestrator.get_delegates() %}
    <delegates>
        You can delegate your turn to one of the following agents or teams:
        {% for delegate in orchestrator.get_delegates() %}
        <delegate>
            <id> {{ delegate.id }} </id>
            <name> {{ delegate.name }} </name>
            <description> {{ delegate.description }} </description>
        </delegate>
        {% endfor %}
    </delegates>
    {% endif %}

    <agent-tree>
        All teams and agents.
        {{ pretty_print(orchestrator.get_agent_tree()) | indent(8) }}
    </agent-tree>

    {% if memories %}
    <memories>
        The following memories were automatically recalled:
        {% for memory in memories %}
        <memory> {{ memory | indent(8) }} </memory>
        {% endfor %}
    </memories>
    {% endif %}
</orchestrator>